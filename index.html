<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen"/>
  <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Put.IO</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>
<body>
  <canvas id="canvas" style="opacity:0">
  </canvas>

  <script type="text/javascript">

    $( function() {
        var canvas = document.getElementById('canvas')
        var context = canvas.getContext('2d');
        var tileSize = 90;
        var horizontalTileCount = ( canvas.width / tileSize ) + 2;
        var verticalTileCount = (canvas.height / tileSize) + 2;

        window.addEventListener('resize', resizeCanvas, false);
        
        function resizeCanvas() {
          // only redraw if it's bigger!
          if (window.innerWidth > canvas.width || window.innerHeight > canvas.height) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                horizontalTileCount = ( canvas.width / tileSize ) + 2;
                verticalTileCount = (canvas.height / tileSize) + 2;

                drawBackground(); 
          };
        }
        
        function drawBackground() {
          for (var i = -0.5; i < horizontalTileCount; i++) {
              for (var j = -0.5; j < verticalTileCount; j++) {
                var colour = Math.floor(Math.random() * 10);
                switch(colour) {
                    case 1 : context.fillStyle = "#f6e93f"; break;
                    case 2 : context.fillStyle = "#5dadf8"; break;
                    default: context.fillStyle = "#ffffff"; break;
                }
                context.fillRect(i * tileSize - 1,  j * tileSize - 1, tileSize - 2, tileSize - 2);
              }
          }
          if (canvas.style.opacity == 0) {
            $(canvas).fadeTo('slow', 1);
          };
        }

        function createBackgroundAnimations() {
          setInterval(function() { 
            var x = Math.floor(Math.random() * horizontalTileCount);
            var y = Math.floor(Math.random() * verticalTileCount);
            var colourInt = Math.floor(Math.random() * 3);
            var colour;
            switch(colourInt) {
                case 1 : colour = "rgba(246, 233, 63, 0.2)"; break;
                case 2 : colour = "rgba(93, 173, 248, 0.2)"; break;
                default: colour = "rgba(255, 255, 255, 0.2"; break;
            }
            animateRectAtXYWithColour(x, y, colour);
          }, 500);

        }

        function animateRectAtXYWithColour(x, y, colour){
          var tickCount = 0;
          var xPosition = x * tileSize - 1 - (tileSize/2);
          var yPosition = y * tileSize - 1 - (tileSize/2);
          var timer = setInterval(function() { 
            context.fillStyle = colour;
            context.fillRect(xPosition, yPosition, tileSize - 2, tileSize - 2);
            if (tickCount++ == 15) {
                clearInterval(timer);
            }
          }, 100);
        }

        resizeCanvas();
        createBackgroundAnimations();
      });


  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-5057919-9");
    pageTracker._trackPageview();
  } catch(err) {}
</script>

</body>
</html>
